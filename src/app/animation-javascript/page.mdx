import Blocks from "@/components/blocks";
import { FrameRateExample } from "@/components/animationJS";

# JavaScript Animation

Using javascript to animate an svg is recommended for more complex, dynamic animations. Javascript allows you to animate a wider range of svg attributes and elements, like the viewbox and filters, making it much more powerful option than CSS animations.

## framerates

Animation is an illusion created by showing a series of slightly different still images in rapid succession. If the images change slowly we won't perceive the images as animation. We'll just perceive a series of still pictures. The faster the images change, the smoother and more fluid the motion appears.

![javascript_anim_race_horse.gif](javascript_anim_race_horse.gif)

The rate at which the images change is called the frame rate. The faster the frame rate, the smoother the animation.

<FrameRateExample />

Browsers optimally render at a frame rate of about 60 fps, but the framerate can be affected by lots of factors.

## Using JavaScript to add/remove CSS animations/transitions

One way to using javascript is to dynamically add and/or remove css transition or animation classes.

For example, let's add a rotation animation to this square

<Blocks>
  {`<svg width="500" height="500" viewbox="0 0 500 500">
  <g id="square" transform="translate(250 250)">
    <rect
      class="square-style"
      x="-150" y="-150"
      width="300" height="300"
      ...
    />
  </g>
</svg>`}
</Blocks>

<svg width="500" height="500" viewbox="0 0 500 500">
  <g id="holder" transform="translate(250 250)">
    <rect
      id="square"
      class="square-style"
      x="-150"
      y="-150"
      width="300"
      height="300"
      rx="10"
      ry="10"
      fill="cornflowerblue"
    />
  </g>
</svg>

First, let's set up a style that sets up the initial rotation transform and the transition properties (**square-style**). We'll create a second class, (**spin-style-transition**), that we'll apply to the element dynamically using javascript.

<Blocks>
  {`<style>
   .square-style {
       transform: rotate(0deg);
       transition: 500ms ease-in-out;
   }

    .spin-style-transition {
        transform: rotate(360deg);
    }.

</style>`}
</Blocks>

We'll use querySelector to get a reference to the square using it's id:

<Blocks>
  {`<script>
   const square = document.querySelector("#square");
</script>`}
</Blocks>

Next we'll add a click event listener to the square.

<Blocks>
  {`<script>
   const square = document.querySelector("#square");
   square.addEventListener("click", () => {
	// code goes here
 })
</script>`}
</Blocks>

Finally we'll use the **classList** property that returns a **DOMTokenList** of classes currently applied to an element. The DomTokenList has a **contains** method that we can use to see if the _spin-style-transition_ class is part of the classlist. If so, we'll remove it. If not, we'll add it.

<Blocks>
  {`<script>
    const square = document.querySelector("#square");
    square.addEventListener("click", () => {
        const list = square.classList;
        list.contains("spin-style-transition") 
        ? square.classList.remove("spin-style-transition") 
        : square.classList.add("spin-style-transition")
 })
</script>`}
</Blocks>
